<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>STOPWATCH USING JAVASCRIPT &vert; JUSTREVIEWED</title>
<meta name="description" content="All you need begginers!"> 
<meta name="keywords" content="JavaScript"> 
<!-- Twitter Cards -->

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zeriff.com/images/logo.png">
<meta name="twitter:title" content="Stopwatch using javascript">
<meta name="twitter:description" content="All you need begginers!">
<meta name="twitter:creator" content="@sujanthakare">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Stopwatch using javascript">
<meta property="og:description" content="All you need begginers!">
<meta property="og:url" content="http://zeriff.com/javascript/2015/12/28/stopwatch-in-javascript/">
<meta property="og:site_name" content="JustReviewed"> 
<meta property="og:image" content="http://zeriff.com/images/">   
<link rel="canonical" href="http://zeriff.com/javascript/2015/12/28/stopwatch-in-javascript/">
<!--<link href="http://zeriff.com/feed.xml" type="application/atom+xml" rel="alternate" title="JustReviewed Feed">-->


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700|Open+Sans:400,600,300,800,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="http://zeriff.com/assets/css/vendor/font-awesome.min.css">
<link rel="stylesheet" href="http://zeriff.com/assets/css/vendor/normalize.css">
<link rel="stylesheet" href="http://zeriff.com/assets/css/vendor/nprogress.css">
<link rel="stylesheet" href="http://zeriff.com/assets/css/vendor/foundation.min.css">
<link rel="stylesheet" href="http://zeriff.com/assets/css/style.css">
<link rel="stylesheet" href="http://zeriff.com/assets/css/post.css">
<link rel="stylesheet" href="http://zeriff.com/assets/css/syntax.css"> 

<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-74625422-1', 'auto');
    ga('send', 'pageview');
</script>
<style type="text/css">@media only screen and (min-width:43.75em){.notepad-post-content div>p:first-child:first-letter{float:left;font-size:4.688rem;line-height:4.375rem;padding-top:.25rem;padding-right:.5rem;padding-left:.188rem;font-family:serif}}</style>
</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

        <main id="notepad-post-container-simple" class="notepad-post-container-simple" role="main">
            <header class="notepad-post-header-simple">
                <div class="notepad-post-menu-header-simple">

                    <a class="notepad-blog-logo" href="http://zeriff.com">
                        <img src="http://zeriff.com/images/logo.png" alt="Blog Logo" />
                    </a>

                <div class="notepad-blog-menu">      
    <div class="notepad-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="notepad-menu">
        <li class="notepad-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>

            <li>
                    <a href="http://zeriff.com/">Home</a>
                 </li>

            <li>
                    <a href="http://zeriff.com/categories">Categories</a>
                 </li>

            <li>
                    <a href="http://zeriff.com/about">About</a>
                 </li>
            
    </ul>

</div>
            </div>

                <div class="notepad-post-title-simple row">
                    <div class="small-12 columns">
                        <div class="notepad-post-meta-simple">
                            <h1>Stopwatch using javascript</h1>
                            <p>by <strong>sujanthakare</strong> &#8212; on <a href="http://zeriff.com/tags/index.html#JavaScript" data-toggle="tooltip" title="Posts tagged with JavaScript" rel="tag">JavaScript</a> <strong><time datetime="2015-12-28T21:00:00+00:00">28 Dec 2015</time></strong></p>
                        </div>
                    </div>
                </div>
            </header>

        <article class="notepad-post-content post tag-simple">
            <div><p>While designing JavaScript based UI we some time need a concept of stopwatch,  which gives functions like pause, resume and reset the watch. by using these functions we can manage complex UI where we have time constraint and JavaScript timer functions like ‘setInterval’ and ‘setTimeout’ are not enough to meet the requirement. so this post will explain you how to design stopwatch using JavaScript.</p>

<blockquote>
  <h1 id="background">Background</h1>
  <p>Recently I came across a requirement where I have to refresh UI after some time interval. now you will say “hey man! this is very easy just use JavaScript timer function ‘setInterval’ “, but there is twist in the requirement, if user is active on the UI, means user is working on any popup then UI is not allowed to refresh. now you will say “then pause timer while user is active and resume as user stops activity. Hmmmmmm, for this you will need stopwatch.” ٩(•̮̮̃-̃)۶ <br /> 
for such kind of requirment stopwatch comes in the mind but there is no such stopwatch thing, in the JavaScript we just have simple timer functions setInterval and setTimeout which are not sufficient to achieve such requirement where we require pause, resume and reset functions</p>
</blockquote>

<h2 id="stopwatch-using-javascript-smallmodule-patternsmall">Stopwatch Using JavaScript <small>Module Pattern</small></h2>

<p>We can use Module pattern and create stopwatch as a module.
Advantage to use module pattern is we can create n number of stopwatch instaces and can use it anywhere in any JavaScript application.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">stopwatch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">me</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">me</span><span class="p">.</span><span class="nx">timeoutCallback</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="nx">me</span><span class="p">.</span><span class="nx">timerId</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">setStopWatch</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="nx">timeout_callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeoutCallback</span> <span class="o">=</span> <span class="nx">timeout_callback</span><span class="p">;</span>
            <span class="nx">timer</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">timer</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">me</span><span class="p">.</span><span class="nx">timeoutCallback</span><span class="p">();</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">-</span> <span class="mi">1000</span><span class="p">;</span>
                <span class="nx">me</span><span class="p">.</span><span class="nx">timerId</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">timer</span><span class="p">();</span>
                <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="kd">var</span> <span class="nx">pause</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">me</span><span class="p">.</span><span class="nx">timerId</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">resume</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">timer</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">reset</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">pause</span><span class="p">();</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="nx">me</span><span class="p">.</span><span class="nx">timeout</span><span class="p">;</span>
            <span class="nx">timer</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="nx">set</span><span class="o">:</span> <span class="nx">setStopWatch</span><span class="p">,</span>
            <span class="nx">pause</span><span class="o">:</span> <span class="nx">pause</span><span class="p">,</span>
            <span class="nx">resume</span><span class="o">:</span> <span class="nx">resume</span><span class="p">,</span>
            <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></figure>

<p>Ok our module is ready, now how to use it
<br />
first create your stopwatch instance</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">yourStopWatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">stopWatch</span><span class="p">();</span></code></pre></figure>

<p>Now set the stopwatch by setting time and callback function. whatever you want to execute after timeout put in callback function.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">yourStopWatch</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Yeeee, after 1000 milisecond&quot;</span><span class="p">);</span>
    <span class="p">})</span></code></pre></figure>

<p>In between if you want to pause, resume and reset the stopwatch just call</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="nx">yourStopWatch</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>

    <span class="nx">yourStopWatch</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>

    <span class="nx">yourStopWatch</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span></code></pre></figure>

<p>It’s super easy to use in any javascript framework like angularJs.</p>

<h1 id="stopwatch-using-extjs">Stopwatch using ExtJs</h1>

<p>Let’s see it using ExtJs, ExtJs is one of the mature javascript framework. ExtJs is derived from YUI library, YUI is totally based on module pattern. so it will have same structure as in above code snippet.</p>

<p>Let’s write the code with same logic and understand how to use it.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
    <span class="nx">Ext</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;Stopwatch&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">timeremaining</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">timeout</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">timeoutCallback</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>
        <span class="nx">timerId</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>
        <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="nx">timeout_callback</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="nx">time</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeoutCallback</span> <span class="o">=</span> <span class="nx">timeout_callback</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timer</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">timer</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">me</span><span class="p">.</span><span class="nx">timeoutCallback</span><span class="p">();</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">-</span> <span class="mi">1000</span><span class="p">;</span>
                <span class="nx">me</span><span class="p">.</span><span class="nx">timerId</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
                    <span class="nx">me</span><span class="p">.</span><span class="nx">timer</span><span class="p">();</span>
                <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="nx">pause</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">me</span><span class="p">.</span><span class="nx">timerId</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">resume</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timer</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">me</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timeremaining</span> <span class="o">=</span> <span class="nx">me</span><span class="p">.</span><span class="nx">timeout</span><span class="p">;</span>
            <span class="nx">me</span><span class="p">.</span><span class="nx">timer</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">});</span></code></pre></figure>

<p>Here we defined a class named Stopwatch. now we have an ExtJs class and we can instantiate this class anywhere in ExtJs application,
If you want stopwatch should have single instance through out the application, make it singletone.</p>

<p>Let’s create instace of stopwatch</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">stopwatch</span> <span class="o">=</span> <span class="nx">Ext</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">&#39;Stopwatch&#39;</span><span class="p">);</span></code></pre></figure>

<p>Now set the stopwatch by setting time and callback function. whatever you want to execute after timeout put in callback function.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
    <span class="nx">stopwatch</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
       <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Yeeee, after 1000 milisecond&quot;</span><span class="p">);</span> 
    <span class="p">});</span></code></pre></figure>

<p>By using this logic you can create stopwatch in any framework and language.</p>

<p>All rights are not reserved, so feel free to copy and share…٩(•̮̮̃-̃)۶</p>

            </div>
        </article>
        <div class="cf"></div>
        <div class="row text-center">
            <section class="notepad-post-share">
                <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;Stopwatch using javascript&quot;%20http://zeriff.com/javascript/2015/12/28/stopwatch-in-javascript/%20via%20&#64;sujanthakare"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=http://zeriff.com/javascript/2015/12/28/stopwatch-in-javascript/"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
                    <i class="fa fa-facebook"></i>
                </a>
                <a class="google-icon" href="https://plus.google.com/share?url=http://zeriff.com/javascript/2015/12/28/stopwatch-in-javascript/"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
                    <i class="fa fa-google-plus"></i>
                </a>
            </section>
        </div>
        <div class="cf"></div>
        

        
        <div class="cf"></div>
        
        <div class="cf"></div>

    <footer class="notepad-site-footer">
    <div class="social-icons">
        
        
        <a href="http://twitter.com/sujanthakare">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-twitter fa-stack-1x"></i>
            </span>
        </a>
        
        
        
        
        <a href="http://github.com/sujanthakare">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-github fa-stack-1x"></i>
            </span>
        </a>
        
        
        <a href="http://facebook.com/sujanthakare">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-facebook fa-stack-1x"></i>
            </span>
        </a>
        
    </div>
    
    <div class="cf"></div>
</footer>
 
</main>    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="http://zeriff.com/assets/js/vendor/jquery-1.11.1.min.js"><\/script>')</script>
    <script src="http://zeriff.com/assets/js/vendor/modernizr.js"></script>
    <script src="http://zeriff.com/assets/js/foundation.min.js"></script>
    
    <script src="http://zeriff.com/assets/js/notepad.js"></script>
    <script src="http://zeriff.com/assets/js/scripts.min.js"></script>
    <script src="http://zeriff.com/assets/js/vendor/nprogress.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/sigma.js/1.0.3/sigma.min.js"></script>

    <script>
      $(document).foundation();
    </script>


<script>NProgress.start();var interval=setInterval(function(){NProgress.inc()},1000);jQuery(window).load(function(){clearInterval(interval);NProgress.done()});jQuery(window).unload(function(){NProgress.start()});</script>
 
</body>
</html>
